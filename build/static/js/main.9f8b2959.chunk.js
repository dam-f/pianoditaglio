(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(3),c=t.n(r),o=(t(9),t(1));var i=function(e){return l.a.createElement("div",{className:"bb b--black-30 pl3 flex justify-between pr3 items-center"},l.a.createElement("p",null,"- ",l.a.createElement("strong",null,e.numStecche)," stecche da"," ",l.a.createElement("strong",null,e.misuraStecca)," cm"),l.a.createElement("small",{className:""},l.a.createElement("input",{className:"",type:"button",value:"elimina"})))};function m(e){return l.a.createElement(i,{numStecche:e[0],misuraStecca:e[1]})}var s=function(e){return e.ordine&&e.ordine.length>0?l.a.createElement("div",{className:"bg-white pa2 br4 pb4 bb bw2"},e.ordine.map(m)):l.a.createElement("div",null)};var u=function(e){return l.a.createElement("div",{className:"bb b--black-30 pl3 flex justify-between pr3 items-center"},l.a.createElement("p",null,"- ",l.a.createElement("strong",null,e.combPiano[0])," barre tagliate cos\xec:"," ",l.a.createElement("strong",null,e.combPiano[2].join(", ")),l.a.createElement("br",null),"(scarto ",Math.round(100*e.combPiano[4]+Number.EPSILON)/100," ","cm)"))};var b=function(e){let a=e.profilo,t=0;if("AL/1"===a?t=50:"AC/6"===a?t=10:"AL/2HD"===a?t=15:"AL/2"===a&&(t=30),e.piano){const a=e.piano,n=a[0][1],r=(a[0][3],Math.floor(n/t)),c=n%t;let o=a.slice(0);return o.shift(),o.pop(),o.pop(),l.a.createElement("div",null,l.a.createElement("div",{className:"bg-white pa2 br4 pb4 bb bw2"},l.a.createElement("p",{className:"tc bb b--black-30"},"BARRE NECESSARIE: ",l.a.createElement("strong",null,n)," (",l.a.createElement("strong",null,r)," pacchi e"," ",l.a.createElement("strong",null,c)," stecche)",l.a.createElement("br",null),l.a.createElement("br",null)),o.map(function(e){return l.a.createElement(u,{combPiano:e})}),"string"===typeof a[a.length-2]&&l.a.createElement("p",{className:"bb b--black-30 pl3 pr3"},"Poi, cerca tra gli sfridi qualcosa per tagliare ancora queste stecche:",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("strong",null,a[a.length-1].flat().join(" ")),l.a.createElement("br",null),l.a.createElement("br",null))),l.a.createElement("p",null))}return l.a.createElement("div",null)};var p=function(){const e=Object(n.useState)({steccheCorrente:"",misuraCorrente:""}),a=Object(o.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),i=Object(o.a)(c,2),m=i[0],u=i[1],p=Object(n.useState)(),E=Object(o.a)(p,2),d=E[0],g=E[1],f=Object(n.useState)([]),h=Object(o.a)(f,2),w=(h[0],h[1],Object(n.useState)("AL/1")),v=Object(o.a)(w,2),N=v[0],S=v[1],z=Object(n.useState)({maxScarto:20,minSfrido:65,larghezzaLama:.5}),A=Object(o.a)(z,2),C=A[0],L=A[1];function O(e){const a=e.target.value,t=e.target.name;L(e=>"opzioneScarto"===t?{maxScarto:a,minSfrido:e.minSfrido,larghezzaLama:e.larghezzaLama}:"opzioneSfrido"===t?{maxScarto:e.maxScarto,minSfrido:a,larghezzaLama:e.larghezzaLama}:"opzioneLama"===t?{maxScarto:e.maxScarto,minSfrido:e.minSfrido,larghezzaLama:a}:void 0)}function k(e){const a=e.target.value,t=e.target.name;r(e=>"numStecche"===t?{steccheCorrente:a,misuraCorrente:e.misuraCorrente}:"misura"===t?{steccheCorrente:e.steccheCorrente,misuraCorrente:a}:void 0)}return l.a.createElement("div",{className:"flex flex-wrap"},l.a.createElement("div",{className:"min-vh-100-l bg-gray pt2 fl w-100-ns w-100-m w-40-l"},l.a.createElement("h1",{className:"pl2 pa1 bg-gold w-100"},"ORDINE"),l.a.createElement("div",{className:"pa3"},l.a.createElement("form",{className:"bg- br3 flex items-end pa2\r "},l.a.createElement("label",{className:"mr2"},l.a.createElement("strong",null,"N. stecche"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{className:"input-reset ba b--black-20 pa2 mb2 db w-100",type:"number",id:"numStecche",name:"numStecche",value:t.steccheCorrente,onChange:k})),l.a.createElement("label",{className:"mr2"},l.a.createElement("strong",null,"Misura taglio"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{className:"input-reset ba b--black-20 pa2 mb2 db w-100",type:"number",id:"misura",name:"misura",value:t.misuraCorrente,onChange:k})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,l.a.createElement("input",{className:"input-reset bg-blue white b ba b--black-20 pa2 mb2 db w-100",type:"submit",value:"Aggiungi",onClick:function(e){e.preventDefault(),u(e=>t.steccheCorrente&&t.misuraCorrente&&t.steccheCorrente>0&&t.misuraCorrente>0?[...e,[Number(t.steccheCorrente),Number(t.misuraCorrente)]]:e),r({steccheCorrente:"",misuraCorrente:""})}}))),l.a.createElement("br",null),l.a.createElement("div",{className:"pa2 br4"},l.a.createElement(s,{ordine:m})))),l.a.createElement("div",{className:"bg-blue pt2 fl w-100-ns w-100-m w-20-l"},l.a.createElement("h1",{className:"pl2 pa1 bg-gold w-100"},"OPZIONI"),l.a.createElement("div",{className:"flex items-start flex-wrap pa3"},l.a.createElement("label",{className:"w-third pa2"},l.a.createElement("strong",null,"SCARTO MAX"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{className:"input-reset ba b--black-20 pa2 mb2 db w-100",name:"opzioneScarto",type:"number",value:C.maxScarto,onChange:O}),l.a.createElement("small",{id:"name-desc",class:"f6 db mb2"},"Lunghezza massimo scarto")),l.a.createElement("label",{className:"w-third pa2"},l.a.createElement("strong",null,"SCARTO MIN"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{className:"input-reset ba b--black-20 pa2 mb2 db w-100",name:"opzioneSfrido",type:"number",value:C.minSfrido,onChange:O}),l.a.createElement("small",{id:"name-desc",class:"f6 db mb2"},"Lunghezza minima sfrido")),l.a.createElement("label",{className:"w-third pa2"},l.a.createElement("strong",null,"LAMA"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{className:"input-reset ba b--black-20 pa2 mb2 db w-100",name:"opzioneLama",type:"number",value:C.larghezzaLama,onChange:O}),l.a.createElement("small",{id:"name-desc",class:"f6 db mb2"},"Larghezza lama (imposta 0.5 per alluminio, 0.2 per acciaio):")),l.a.createElement("label",{className:"w-third pa2"},l.a.createElement("strong",null,"PROFILO"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("fieldset",{className:"input-reset bw0 pa0 w-100",onChange:function(e){const a=e.target.value;"AL/1"===a?S("AL/1"):"AC/6"===a?S("AC/6"):"AL/2HD"===a?S("AL/2HD"):"AL/2"===a&&S("AL/2")}},l.a.createElement("select",{name:"profilo",className:"input-reset ba b--black-20 pa2 mb2 db w-100"},l.a.createElement("option",{value:"AL/1",selected:"selected"},"AL/1"),l.a.createElement("option",{value:"AC/6"},"AC/6"),l.a.createElement("option",{value:"AL/2HD"},"AL/2 HD"),l.a.createElement("option",{value:"AL/2"},"AL/2"))),l.a.createElement("small",{id:"name-desc",class:"f6 db mb2"},"Info usata per calcolare il numero dei pacchi necessari:")),l.a.createElement("label",{className:"w-third pa2"},l.a.createElement("strong",null,"DEBUG"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{className:"input-reset ba b--black-20 pa2 mb2 db w-100",name:"opzioneDebug",type:"button",value:"SAMPLE",onClick:function(e){u([[186,199.2],[714,139.2],[248,119.2],[186,109.2],[280,89.2]])}}),l.a.createElement("small",{id:"name-desc",class:"f6 db mb2"},"Aggiunge un ordine di esempio.")))),l.a.createElement("div",{className:"bg-gold pt2 fl w-100 w-100-ns w-100-m w-40-l pa3"},l.a.createElement("h1",{className:"pl2 pa1"},"PIANO"),l.a.createElement("p",{className:"pl2 tc"},l.a.createElement("input",{className:"input-reset bg-blue b white bw2 bb-black bt-0 bl-0 br-0 pa2 mb2 w-50 br3",type:"button",name:"creaPiano",onClick:function(){if(m.length>0){g([]);let t,n=0,l=[],r=[],c=[],o=0,i=0,s=[];function e(e,a,t=650){let n=a.reduce(function(e,a){return e+a},0)+C.larghezzaLama*a.length;return e<650-n&&(650-n-e>C.minSfrido||650-n-e<C.maxScarto)}let u=!0;function a(o){l=[];const i=[];o.forEach((e,a)=>i.push(e[1])),i.sort(function(e,a){return a[1]-e[1]}),function(a){let t=a[a.length-1];for(let e=0;e<a.length;e++)c=a[e],(r=[]).push(c),l.push(r);var c;let o=Math.round(650/(t+.5));if(u)for(let r=0;r<o;r++){let t=l.length;for(let c=0;c<t;c++){let t=650-l[c].reduce((e,a)=>e+a,0);for(let o=0;o<a.length;o++)if(e(a[o],l[c],t)&&(1e6===++n?u=!!window.confirm("Hai gi\xe0 raggiunto un milione di iterazioni. Probabilmente l'ordine \xe8 molto complesso o contiene almeno una misura molto piccola. Se pensi che il dispositivo su cui stai eseguendo il calcolo sia abbastanza potente, premi OK per continuare"):5e6===n&&(u=!!window.confirm("Ora sono cinque milioni di iterazioni. Probabilmente l'ordine \xe8 molto complesso o contiene almeno una misura molto piccola. Se pensi che il dispositivo su cui stai eseguendo il calcolo sia abbastanza potente, premi OK per continuare")),l[c].length>r)){let e=l[c].slice(0);e.push(a[o]),l.push(e)}}}}(i),u?(function(e,a){let t=0,n=!1,l=e[0].slice(0),r=[];for(let c=0;c<a.length;c++)r[c]=a[c].slice();let o,i=!1;for(;!i;){for(let e=0;e<l.length;e++)for(let a=0;a<r.length;a++)l[e]===r[a][1]&&(r[a][0]=r[a][0]-1,0===r[a][0]&&(console.log("Ho finito di tagliare la misura fittizia ",r[a][1]),i=!0,o=r[a][1]));t++}let m=!1;for(let c=0;c<r.length;c++)r[c][0]<0&&(m=!0,s.push(["-",Math.abs(r[c][0]),"x",r[c][1]]));if(m&&t--,m)for(let c=0;c<t;c++)for(let t=0;t<e[0].length;t++)for(let n=0;n<a.length;n++)e[0][t]===a[n][1]&&(a[n][0]=a[n][0]-1);else for(;!n;)for(let t=0;t<e[0].length;t++)for(let l=0;l<a.length;l++)e[0][t]===a[l][1]&&(a[l][0]=a[l][0]-1,0===a[l][0]&&(console.log("Ho finito di tagliare la misura ",a[l][1]),n=!0,a.splice(l,1)));for(let c=0;c<a.length;c++)a[c][1]===o&&a.splice(c,1);c.push([t,"barre tagliate cos\xec: ",e[0]," con scarto: ",e[1]])}(t=function(e){let a=[e[0]];for(let t=0;t<e.length;t++){let n=650-a[0].reduce(function(e,a){return e+a},0),l=650-e[t].reduce(function(e,a){return e+a},0);n>l&&(a=[e[t],l])}return a}(l),o),o.length>0&&a(o)):g([])}a(m),function(e){for(let a=0;a<e.length;a++)o+=e[a][0],i+=e[a][4]*e[a][0]}(c),c.unshift(["Barre utilizzate: ",o,"Scarto totale: ",i]),c.push("(SOLUZ. TEMPORANEA) Infine taglia queste stecche dagli sfridi o da una nuova barra (se sono molte puoi calcolare un nuovo piano di taglio) :",s),g(c),console.log(n)}},value:"CREA PIANO"})),l.a.createElement(b,{piano:d,profilo:N})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(10);c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})},4:function(e,a,t){e.exports=t(11)},9:function(e,a,t){}},[[4,1,2]]]);
//# sourceMappingURL=main.9f8b2959.chunk.js.map